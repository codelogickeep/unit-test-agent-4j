# Unit Test Agent 4j

ä¼ä¸šçº§ Java å•å…ƒæµ‹è¯•æ™ºèƒ½ä½“ï¼Œä¸“æ³¨äºä¸ºé—ç•™ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡çš„ JUnit 5 + Mockito æµ‹è¯•ä»£ç ã€‚

[![Java](https://img.shields.io/badge/Java-21+-blue.svg)](https://openjdk.java.net/)
[![Maven](https://img.shields.io/badge/Maven-3.8+-red.svg)](https://maven.apache.org/)
[![License](https://img.shields.io/badge/License-Apache%202.0-green.svg)](LICENSE)
[![Version](https://img.shields.io/badge/Version-2.1.0-green.svg)](https://github.com/codelogickeep/unit-test-agent-4j)

## v2.1.0 æ–°ç‰¹æ€§

- ğŸ§ª **æ ¸å¿ƒæ¡†æ¶å•å…ƒæµ‹è¯•** - ä¸º ContextManagerã€ToolRegistryã€JsonUtil æ·»åŠ å…¨é¢æµ‹è¯•
- ğŸ’¾ **çŸ¥è¯†åº“ç´¢å¼•æŒä¹…åŒ–** - ç¼“å­˜ç´¢å¼•ï¼Œé¿å…æ¯æ¬¡å¯åŠ¨é‡å»º
- ğŸ” **å˜æ›´å½±å“èŒƒå›´åˆ†æ** - åˆ†æä¾èµ–å›¾ï¼Œè¯†åˆ«ä»£ç å˜æ›´å½±å“çš„æµ‹è¯•
- ğŸ›‘ **æ™ºèƒ½åœæ»æ£€æµ‹** - è¦†ç›–ç‡åœæ­¢å¢é•¿æ—¶æ™ºèƒ½åœæ­¢è¿­ä»£
- ğŸ›¡ï¸ **ç¼–è¯‘å®ˆå«æœºåˆ¶** - å·¥å…·å±‚é¢å¼ºåˆ¶çº¦æŸï¼šè¯­æ³•æ£€æŸ¥å¿…é¡»é€šè¿‡æ‰èƒ½ç¼–è¯‘
- âš™ï¸ **æ–°é…ç½®é¡¹** - `max-stale-iterations`ã€`min-coverage-gain` æä¾›ç²¾ç»†æ§åˆ¶
- ğŸ“¦ **è‡ªåŠ¨ç‰ˆæœ¬æ£€æµ‹** - æ„å»ºè„šæœ¬è‡ªåŠ¨è·å–æœ€æ–° release ç‰ˆæœ¬

### v2.0.0 ç‰¹æ€§å›é¡¾

- ğŸš€ è‡ªç ”è½»é‡çº§ Agent æ¡†æ¶ - æ›¿æ¢ LangChain4jï¼Œä½¿ç”¨ä¸“é—¨æ„å»ºçš„æ¡†æ¶
- ğŸ”§ æ›´å¥½çš„æ™ºè°± AI æ”¯æŒ - ä¿®å¤æ¶ˆæ¯æ ¼å¼é—®é¢˜ï¼ˆ1214 é”™è¯¯ï¼‰
- ğŸ“Š æ”¹è¿›çš„ä¸Šä¸‹æ–‡ç®¡ç† - æ™ºèƒ½æ¶ˆæ¯è£å‰ªï¼Œä¿æŒæœ‰æ•ˆå¯¹è¯åºåˆ—
- âš¡ å‡å°‘ä¾èµ– - JAR åŒ…ä½“ç§¯å‡å°çº¦ 50%
- ğŸ”¬ è¦†ç›–ç‡åé¦ˆå¼•æ“ - æ™ºèƒ½åˆ†æï¼ŒåŒ…å«è¾¹ç•Œæ£€æµ‹å’Œæ”¹è¿›å»ºè®®

## ç›®å½•

- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [å®‰è£…](#å®‰è£…)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
  - [å•æ–‡ä»¶æ¨¡å¼](#å•æ–‡ä»¶æ¨¡å¼)
  - [æ‰¹é‡æ¨¡å¼](#æ‰¹é‡æ¨¡å¼)
  - [å¢é‡æ¨¡å¼](#å¢é‡æ¨¡å¼)
  - [äº¤äº’æ¨¡å¼](#äº¤äº’æ¨¡å¼)
- [å‘½ä»¤è¡Œå‚è€ƒ](#å‘½ä»¤è¡Œå‚è€ƒ)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [å¯ç”¨å·¥å…·](#å¯ç”¨å·¥å…·)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [å‚ä¸è´¡çŒ®](#å‚ä¸è´¡çŒ®)

## æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **å¤šæ¨¡å‹æ”¯æŒ** | åŸç”Ÿæ”¯æŒ OpenAIã€Anthropic (Claude)ã€Geminiã€æ™ºè°± AI åŠ OpenAI å…¼å®¹ä»£ç† |
| **è‡ªç ” Agent æ¡†æ¶** | è½»é‡çº§ä¸“ç”¨æ¡†æ¶ï¼ˆæ—  LangChain4j ä¾èµ–ï¼‰ |
| **æ™ºèƒ½ç¯å¢ƒå®¡è®¡** | è‡ªåŠ¨æ£€æµ‹é¡¹ç›®ä¾èµ–ï¼ˆJUnit 5ã€Mockitoã€JaCoCoï¼‰åŠç‰ˆæœ¬å…¼å®¹æ€§ |
| **è‡ªæˆ‘ä¿®å¤æœºåˆ¶** | è‡ªåŠ¨ç¼–è¯‘è¿è¡Œæµ‹è¯•ï¼Œæ ¹æ®é”™è¯¯æ—¥å¿—ä¿®å¤ä»£ç  |
| **æ ‡å‡†åŒ–æµ‹è¯•** | å¼ºåˆ¶ä½¿ç”¨ JUnit 5 + Mockito + mockito-inline æ ‡å‡† |
| **é¡¹ç›®æ ¹ä¿æŠ¤** | é€šè¿‡ `pom.xml` æ£€æµ‹é”å®šé¡¹ç›®æ ¹ç›®å½•ï¼Œé˜²æ­¢è·¯å¾„å¹»è§‰ |
| **æŒ‡æ•°é€€é¿é‡è¯•** | æ™ºèƒ½å¤„ç† API é€Ÿç‡é™åˆ¶ |
| **RAG çŸ¥è¯†åº“** | æ£€ç´¢ç°æœ‰æµ‹è¯•å’Œæ–‡æ¡£ï¼Œç¡®ä¿ä»£ç é£æ ¼ä¸€è‡´ |
| **è¦†ç›–ç‡é©±åŠ¨å¢å¼º** | åˆ†ææœªè¦†ç›–æ–¹æ³•ï¼Œè‡ªåŠ¨è¡¥å……æµ‹è¯• |
| **è¦†ç›–ç‡åé¦ˆå¼•æ“** | æ™ºèƒ½åé¦ˆï¼ŒåŒ…å«è¾¹ç•Œåˆ†æå’Œæ”¹è¿›å»ºè®® |
| **Git å¢é‡æ£€æµ‹** | ä»…ä¸ºå˜æ›´æ–‡ä»¶ç”Ÿæˆæµ‹è¯•ï¼ˆæœªæäº¤/æš‚å­˜/åˆ†æ”¯é—´æ¯”è¾ƒï¼‰ |
| **å˜å¼‚æµ‹è¯•** | é›†æˆ PITest è¯„ä¼°æµ‹è¯•æœ‰æ•ˆæ€§ |
| **LSP è¯­æ³•æ£€æŸ¥** | å¯é€‰çš„ Eclipse JDT Language Server é›†æˆï¼Œæä¾›å®Œæ•´è¯­ä¹‰åˆ†æï¼ˆè‡ªåŠ¨ä¸‹è½½ï¼‰ |
| **é¢„ç¼–è¯‘éªŒè¯** | åŸºäº JavaParser çš„å¿«é€Ÿè¯­æ³•æ£€æŸ¥ï¼Œç¼–è¯‘å‰æ‹¦æˆªé”™è¯¯ |
| **è¿­ä»£æ–¹æ³•æµ‹è¯•** | é€æ–¹æ³•ç”Ÿæˆæµ‹è¯•ï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åº |
| **äº¤äº’æ¨¡å¼** | åœ¨åº”ç”¨æ›´æ”¹å‰é¢„è§ˆå¹¶ç¡®è®¤æ–‡ä»¶å†™å…¥æ“ä½œï¼ˆå®‰å…¨ä¼˜å…ˆçš„å·¥ä½œæµï¼‰ |
| **ç»Ÿè®¡æŠ¥å‘Š** | ç”Ÿæˆè¯¦ç»†çš„ Markdown æŠ¥å‘Šï¼ŒåŒ…å« Token ä½¿ç”¨å’Œè¦†ç›–ç‡è¶‹åŠ¿ |

## å®‰è£…

### å‰ç½®è¦æ±‚

- **JDK 21+**ï¼ˆå¿…éœ€ï¼‰
- **Maven 3.8+**ï¼ˆå¿…éœ€ï¼Œç”¨äºæ„å»ºï¼‰
- **Git**ï¼ˆå¿…éœ€ï¼Œç”¨äºå…‹éš†æºç ï¼‰

### å¿«é€Ÿå®‰è£…ï¼ˆæ¨èï¼‰

ä½¿ç”¨æˆ‘ä»¬çš„ä¸€é”®æ„å»ºè„šæœ¬ï¼Œè‡ªåŠ¨å®Œæˆç¯å¢ƒæ£€æŸ¥ã€æºç å…‹éš†ã€é¡¹ç›®æ„å»ºå’Œå®‰è£…ã€‚

#### Linux / macOS

```bash
# ä¸€é”®å…‹éš†ã€æ„å»ºå¹¶å®‰è£…
curl -sSL https://raw.githubusercontent.com/codelogickeep/unit-test-agent-4j/main/build.sh | bash

# æ·»åŠ åˆ° PATHï¼ˆæ·»åŠ åˆ° ~/.bashrc æˆ– ~/.zshrcï¼‰
export PATH="$PATH:$HOME/.utagent"
```

#### Windows (PowerShell 7+)

```powershell
# ä¸€é”®å…‹éš†ã€æ„å»ºå¹¶å®‰è£…
irm https://raw.githubusercontent.com/codelogickeep/unit-test-agent-4j/main/build.ps1 | iex

# æ‰‹åŠ¨æ·»åŠ åˆ° PATH: $env:USERPROFILE\.utagent
```

æ„å»ºè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. æ£€æŸ¥ç¯å¢ƒï¼ˆJava 21+ã€Maven 3.8+ã€Gitï¼‰
2. å…‹éš†æºç 
3. ä½¿ç”¨ Maven æ„å»ºé¡¹ç›®ï¼ˆéœ€è¦ 2-5 åˆ†é’Ÿï¼‰
4. å®‰è£… `utagent` å‘½ä»¤åˆ° `~/.utagent`ï¼ˆWindows ä¸º `%USERPROFILE%\.utagent`ï¼‰
5. æ¸…ç†æ„å»ºæ–‡ä»¶

å®‰è£…å®Œæˆåå³å¯ä½¿ç”¨ï¼š

```bash
# é…ç½® API Key
utagent config --protocol openai --api-key "sk-..." --model "gpt-4"

# ç”Ÿæˆæµ‹è¯•
utagent --target src/main/java/com/example/MyService.java
```

### æ‰‹åŠ¨ä»æºç æ„å»º

å¦‚æœä½ æƒ³æ‰‹åŠ¨æ„å»ºï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/codelogickeep/unit-test-agent-4j.git
cd unit-test-agent-4j

# æ„å»ºé¡¹ç›®
mvn clean package -DskipTests

# åˆ›å»ºå®‰è£…ç›®å½•
mkdir -p ~/.utagent

# å¤åˆ¶ JAR æ–‡ä»¶
cp target/utagent.jar ~/.utagent/

# åˆ›å»ºå‘½ä»¤è„šæœ¬
echo '#!/usr/bin/env bash
java -jar "$HOME/.utagent/utagent.jar" "$@"' > ~/.utagent/utagent
chmod +x ~/.utagent/utagent

# æ·»åŠ åˆ° PATH
export PATH="$PATH:$HOME/.utagent"
```

### éªŒè¯å®‰è£…

```bash
# ä¸€é”®å®‰è£…æ–¹å¼
utagent --help

# ä»æºç æ„å»ºæ–¹å¼
java -jar target/utagent.jar --help
```

## å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šé…ç½® API Key

```bash
# æ–¹å¼ Aï¼šä½¿ç”¨ config å‘½ä»¤ï¼ˆæ¨èï¼‰
utagent config \
  --protocol openai \
  --api-key "sk-your-api-key" \
  --model "gpt-4o"

# æ–¹å¼ Bï¼šè®¾ç½®ç¯å¢ƒå˜é‡
export OPENAI_API_KEY="sk-your-api-key"
```

### ç¬¬äºŒæ­¥ï¼šç”Ÿæˆç¬¬ä¸€ä¸ªæµ‹è¯•

```bash
# ä¸€é”®å®‰è£…æ–¹å¼
utagent --target src/main/java/com/example/MyService.java

# ä»æºç æ„å»ºæ–¹å¼
java -jar target/utagent.jar --target src/main/java/com/example/MyService.java
```

### ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹è¾“å‡º

Agent å°†ä¼šï¼š
1. åˆ†ææºæ–‡ä»¶
2. åœ¨ `src/test/java/com/example/MyServiceTest.java` ç”Ÿæˆæµ‹è¯•ç±»
3. ç¼–è¯‘å¹¶è¿è¡Œæµ‹è¯•
4. è‡ªåŠ¨ä¿®å¤ä»»ä½•å¤±è´¥

## ä½¿ç”¨æŒ‡å—

### å•æ–‡ä»¶æ¨¡å¼

ä¸ºæŒ‡å®šçš„ Java æºæ–‡ä»¶ç”Ÿæˆæµ‹è¯•ã€‚

```bash
# åŸºæœ¬ç”¨æ³•
utagent --target path/to/MyService.java

# ä½¿ç”¨çŸ¥è¯†åº“åŒ¹é…ä»£ç é£æ ¼
utagent \
  --target path/to/MyService.java \
  -kb src/test/java

# å¯ç”¨äº¤äº’ç¡®è®¤
utagent \
  --target path/to/MyService.java \
  --interactive

# è‡ªå®šä¹‰è¦†ç›–ç‡é˜ˆå€¼
utagent \
  --target path/to/MyService.java \
  --threshold 90
```

### æ‰¹é‡æ¨¡å¼

æ‰«ææ•´ä¸ªé¡¹ç›®ï¼Œä¸ºæ‰€æœ‰éœ€è¦è¦†ç›–çš„ç±»ç”Ÿæˆæµ‹è¯•ã€‚

```bash
# æ‰«ææ•´ä¸ªé¡¹ç›®
utagent --project /path/to/project

# ä½¿ç”¨æ’é™¤è§„åˆ™
utagent \
  --project /path/to/project \
  --exclude "**/dto/**,**/vo/**,**/entity/**"

# Dry-run æ¨¡å¼ï¼ˆä»…åˆ†æï¼‰
utagent \
  --project /path/to/project \
  --dry-run

# é™åˆ¶æ‰¹é‡å¤„ç†æ•°é‡
utagent \
  --project /path/to/project \
  --batch-limit 10
```

**å†…ç½®æ’é™¤è§„åˆ™ï¼š**
- `**/dto/**`ã€`**/vo/**`ã€`**/domain/**`
- `**/*DTO.java`ã€`**/*VO.java`ã€`**/*Entity.java`
- `**/*Enum.java`ã€`**/*Criteria.java`
- `**/dao/**/*DAO.java`ã€`**/repo/**/*Repo.java`

### å¢é‡æ¨¡å¼

ä»…ä¸º Git ä¸­å˜æ›´çš„æ–‡ä»¶ç”Ÿæˆæµ‹è¯•ã€‚

```bash
# æµ‹è¯•æœªæäº¤çš„å˜æ›´ï¼ˆå·¥ä½œåŒº + æš‚å­˜åŒºï¼‰
utagent \
  --project /path/to/project \
  --incremental

# ä»…æµ‹è¯•æš‚å­˜åŒºå˜æ›´
utagent \
  --project /path/to/project \
  --incremental \
  --incremental-mode STAGED_ONLY

# æ¯”è¾ƒä¸¤ä¸ª refï¼ˆå¦‚ï¼šfeature åˆ†æ”¯ vs mainï¼‰
utagent \
  --project /path/to/project \
  --incremental \
  --incremental-mode COMPARE_REFS \
  --base-ref main \
  --target-ref HEAD

# æ¯”è¾ƒç‰¹å®šæäº¤
utagent \
  --project /path/to/project \
  --incremental \
  --incremental-mode COMPARE_REFS \
  --base-ref abc123 \
  --target-ref def456
```

**å¢é‡æ¨¡å¼ç±»å‹ï¼š**
| æ¨¡å¼ | è¯´æ˜ |
|------|------|
| `UNCOMMITTED` | å·¥ä½œåŒº + æš‚å­˜åŒºçš„å˜æ›´ï¼ˆé»˜è®¤ï¼‰ |
| `STAGED_ONLY` | ä»…æš‚å­˜åŒºå˜æ›´ |
| `COMPARE_REFS` | æ¯”è¾ƒä¸¤ä¸ª Git refï¼ˆåˆ†æ”¯ã€æäº¤ã€æ ‡ç­¾ï¼‰ |

### äº¤äº’æ¨¡å¼

åœ¨æ™ºèƒ½ä½“ä¿®æ”¹ä»£ç åº“ä¹‹å‰é¢„è§ˆå¹¶ç¡®è®¤æ¯æ¬¡æ–‡ä»¶å†™å…¥æ“ä½œã€‚æ­¤æ¨¡å¼æä¾›é¢å¤–çš„å®‰å…¨æ€§å’Œæ§åˆ¶åŠ›ã€‚

#### ä½•æ—¶ä½¿ç”¨äº¤äº’æ¨¡å¼

**âœ… æ¨èç”¨äºï¼š**
- **ç”Ÿäº§ä»£ç åº“** - åœ¨åº”ç”¨æ›´æ”¹å‰å®¡æŸ¥å˜æ›´
- **å…³é”®ç³»ç»Ÿ** - åœ¨æäº¤å‰ç¡®ä¿æµ‹è¯•ä»£ç è´¨é‡
- **å­¦ä¹ /å®¡æŸ¥** - åœ¨æ¥å—å‰äº†è§£æ™ºèƒ½ä½“ç”Ÿæˆçš„å†…å®¹
- **é¦–æ¬¡ä½¿ç”¨** - ç†Ÿæ‚‰æ™ºèƒ½ä½“è¡Œä¸º
- **è‡ªå®šä¹‰æµ‹è¯•æ¨¡å¼** - éªŒè¯ç”Ÿæˆçš„æµ‹è¯•æ˜¯å¦ç¬¦åˆé¡¹ç›®é£æ ¼

**âŒ ä¸éœ€è¦ç”¨äºï¼š**
- **å¼€å‘/æµ‹è¯•ç¯å¢ƒ** - è‡ªåŠ¨åŒ–å·¥ä½œæµ
- **CI/CD æµæ°´çº¿** - éœ€è¦éäº¤äº’å¼æ‰§è¡Œ
- **æ‰¹é‡å¤„ç†** - å¤ªå¤šç¡®è®¤ä¼šé™ä½é€Ÿåº¦

#### ä½¿ç”¨æ–¹æ³•

```bash
# é€šè¿‡å‘½ä»¤è¡Œå¯ç”¨äº¤äº’æ¨¡å¼
utagent \
  --target path/to/MyService.java \
  --interactive

# æˆ–ä½¿ç”¨ç®€çŸ­å½¢å¼
utagent \
  --target path/to/MyService.java \
  -i

# æˆ–åœ¨ agent.yml ä¸­é…ç½®
workflow:
  interactive: true
```

#### äº¤äº’å¼å·¥ä½œæµç¨‹

å¯ç”¨äº¤äº’æ¨¡å¼åï¼Œæ™ºèƒ½ä½“ä¼šåœ¨æ¯æ¬¡æ–‡ä»¶å†™å…¥æ“ä½œå‰æš‚åœå¹¶æ˜¾ç¤ºï¼š

1. **æ–‡ä»¶é¢„è§ˆ** - è¦å†™å…¥æ–‡ä»¶çš„å‰ 30 è¡Œ
2. **æ“ä½œç±»å‹** - åˆ›å»ºæ–°æ–‡ä»¶ã€è¦†ç›–ç°æœ‰æ–‡ä»¶æˆ–è¿½åŠ åˆ°æ–‡ä»¶
3. **æ–‡ä»¶è·¯å¾„** - æ–‡ä»¶å°†è¢«å†™å…¥çš„ç¡®åˆ‡ä½ç½®

**äº¤äº’å¼æç¤ºç¤ºä¾‹ï¼š**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ å†™å…¥æ–‡ä»¶: src/test/java/com/example/MyServiceTest.java          â•‘
â•‘ æ“ä½œç±»å‹: åˆ›å»ºæ–°æ–‡ä»¶                                              â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ é¢„è§ˆï¼ˆå‰ 30 è¡Œï¼‰ï¼š                                                 â•‘
â•‘                                                                  â•‘
â•‘ package com.example;                                             â•‘
â•‘                                                                  â•‘
â•‘ import org.junit.jupiter.api.Test;                               â•‘
â•‘ import org.junit.jupiter.api.extension.ExtendWith;               â•‘
â•‘ import org.mockito.InjectMocks;                                  â•‘
â•‘ import org.mockito.Mock;                                          â•‘
â•‘ import org.mockito.junit.jupiter.MockitoExtension;               â•‘
â•‘ ...                                                              â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ [Y] ç¡®è®¤  [n] å–æ¶ˆ  [v] æŸ¥çœ‹å®Œæ•´å†…å®¹                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**å¯ç”¨æ“ä½œï¼š**
- **`Y` æˆ– `Enter`** - ç¡®è®¤å¹¶å†™å…¥æ–‡ä»¶
- **`n`** - å–æ¶ˆæ­¤æ¬¡å†™å…¥æ“ä½œï¼ˆæ™ºèƒ½ä½“å°†ç»§ç»­å…¶ä»–æ“ä½œï¼‰
- **`v`** - åœ¨å†³å®šå‰æŸ¥çœ‹å®Œæ•´æ–‡ä»¶å†…å®¹

#### ä½¿ç”¨åœºæ™¯

**1. å®¡æŸ¥ç”Ÿæˆçš„æµ‹è¯•ä»£ç **
```bash
# ç”Ÿæˆæµ‹è¯•å¹¶é¢„è§ˆ
utagent --target MyService.java --interactive

# åœ¨æ¥å—å‰å®¡æŸ¥æ¯ä¸ªæµ‹è¯•æ–‡ä»¶
# æ™ºèƒ½ä½“æ˜¾ç¤ºï¼š"å³å°†åˆ›å»º MyServiceTest.java"
# æ‚¨å¯ä»¥ï¼šæŸ¥çœ‹å®Œæ•´å†…å®¹ã€ç¡®è®¤æˆ–è·³è¿‡
```

**2. ä¿æŠ¤ç°æœ‰æµ‹è¯•æ–‡ä»¶**
```bash
# æ™ºèƒ½ä½“æ£€æµ‹åˆ°ç°æœ‰æµ‹è¯•æ–‡ä»¶
# æ˜¾ç¤ºï¼š"å³å°†è¦†ç›–ç°æœ‰ MyServiceTest.java"
# æ‚¨å¯ä»¥ï¼šå®¡æŸ¥å˜æ›´ã€ç¡®è®¤æˆ–å–æ¶ˆä»¥ä¿ç•™ç°æœ‰æµ‹è¯•
```

**3. å¢é‡æµ‹è¯•ç”Ÿæˆ**
```bash
# åœ¨å¯ç”¨äº¤äº’æ¨¡å¼çš„è¿­ä»£æ¨¡å¼ä¸‹
# æ™ºèƒ½ä½“ä¸€æ¬¡ç”Ÿæˆä¸€ä¸ªæ–¹æ³•çš„æµ‹è¯•
# æ‚¨å®¡æŸ¥å¹¶ç¡®è®¤æ¯æ‰¹æµ‹è¯•åå†ç»§ç»­
```

**4. å­¦ä¹ æ™ºèƒ½ä½“è¡Œä¸º**
```bash
# é¦–æ¬¡ä½¿ç”¨æ™ºèƒ½ä½“ï¼Ÿå¯ç”¨äº¤äº’æ¨¡å¼
# æŸ¥çœ‹ç”Ÿæˆçš„ä»£ç 
# äº†è§£æµ‹è¯•æ¨¡å¼å’Œç»“æ„
# åœ¨è‡ªåŠ¨åŒ–æ¨¡å¼è¿è¡Œå‰å»ºç«‹ä¿¡å¿ƒ
```

#### é…ç½®æ–¹å¼

æ‚¨å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼å¯ç”¨äº¤äº’æ¨¡å¼ï¼š

1. **å‘½ä»¤è¡Œå‚æ•°**ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
   ```bash
   --interactive  # æˆ– -i
   ```

2. **é…ç½®æ–‡ä»¶**
   ```yaml
   workflow:
     interactive: true
   ```

3. **é»˜è®¤è¡Œä¸º**
   - é»˜è®¤å€¼ï¼š`false`ï¼ˆéäº¤äº’å¼ï¼‰
   - è®¾ç½®ä¸º `true` ç”¨äºå®‰å…¨ä¼˜å…ˆçš„å·¥ä½œæµ

### å·¥ä½œæµç¨‹é˜¶æ®µï¼ˆå†…éƒ¨ï¼‰

å®Œæ•´çš„å•æµ‹ç”Ÿæˆæµç¨‹åŒ…å«å¤šä¸ªé˜¶æ®µï¼ŒLLM æ ¹æ®å½“å‰ä»»åŠ¡è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å·¥å…·ï¼š

| é˜¶æ®µ | è¯´æ˜ | å…³é”®å·¥å…· |
|------|------|----------|
| **åˆ†æ** | è¯»å–å¹¶ç†è§£æºä»£ç  | CodeAnalyzerTool, FileSystemTool |
| **ç”Ÿæˆ** | ç”Ÿæˆæµ‹è¯•æ–‡ä»¶ | FileSystemTool, KnowledgeBaseTool, SyntaxCheckerTool |
| **éªŒè¯** | ç¼–è¯‘ã€è¿è¡Œæµ‹è¯•ã€æ£€æŸ¥è¦†ç›–ç‡ | MavenExecutorTool, CoverageTool |
| **ä¿®å¤** | ä¿®å¤å¤±è´¥çš„æµ‹è¯• | FileSystemTool, SyntaxCheckerTool |

æ‰€æœ‰å·¥å…·åœ¨å¯åŠ¨æ—¶åŠ è½½ï¼ŒLLM åœ¨æ¯ä¸ªæ­¥éª¤è‡ªåŠ¨å†³å®šä½¿ç”¨å“ªäº›å·¥å…·ã€‚

**äº¤äº’æç¤ºç¤ºä¾‹ï¼š**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ å†™å…¥æ–‡ä»¶: src/test/java/com/example/MyServiceTest.java          â•‘
â•‘ æ“ä½œç±»å‹: åˆ›å»ºæ–°æ–‡ä»¶                                              â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ é¢„è§ˆï¼ˆå‰ 30 è¡Œï¼‰:                                                 â•‘
â•‘                                                                  â•‘
â•‘ package com.example;                                             â•‘
â•‘                                                                  â•‘
â•‘ import org.junit.jupiter.api.Test;                               â•‘
â•‘ import org.junit.jupiter.api.extension.ExtendWith;               â•‘
â•‘ ...                                                              â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ [Y] ç¡®è®¤  [n] å–æ¶ˆ  [v] æŸ¥çœ‹å®Œæ•´å†…å®¹                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## å‘½ä»¤è¡Œå‚è€ƒ

### å…¨å±€é€‰é¡¹

| é€‰é¡¹ | ç®€å†™ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|--------|
| `--config` | `-c` | é…ç½®æ–‡ä»¶è·¯å¾„ | è‡ªåŠ¨æ£€æµ‹ |
| `--protocol` | | LLM åè®® (openai/anthropic/gemini) | æ¥è‡ªé…ç½® |
| `--api-key` | | API å¯†é’¥ | æ¥è‡ªé…ç½®/ç¯å¢ƒå˜é‡ |
| `--base-url` | | API åŸºç¡€ URL | åè®®é»˜è®¤å€¼ |
| `--model` | `-m` | æ¨¡å‹åç§° | æ¥è‡ªé…ç½® |
| `--temperature` | `-t` | é‡‡æ ·æ¸©åº¦ (0.0-1.0) | 0.0 |
| `--timeout` | | è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰ | 120 |
| `--max-retries` | | æœ€å¤§é‡è¯•æ¬¡æ•° | 3 |
| `--verbose` | `-v` | å¯ç”¨è¯¦ç»†æ—¥å¿— | false |
| `--help` | `-h` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ | |

### ç›®æ ‡é€‰é¡¹

| é€‰é¡¹ | ç®€å†™ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `--target` | | å•ä¸ªæºæ–‡ä»¶è·¯å¾„ | `src/main/java/Foo.java` |
| `--project` | `-p` | æ‰¹é‡æ¨¡å¼çš„é¡¹ç›®æ ¹ç›®å½• | `/path/to/project` |
| `--exclude` | `-e` | æ’é™¤è§„åˆ™ï¼ˆé€—å·åˆ†éš”ï¼‰ | `**/dto/**,**/vo/**` |
| `--threshold` | | è¦†ç›–ç‡é˜ˆå€¼ % | 80 |
| `--dry-run` | | ä»…åˆ†æï¼Œä¸ç”Ÿæˆ | |
| `--batch-limit` | | æœ€å¤§å¤„ç†ç±»æ•° | æ— é™åˆ¶ |

### å¢é‡é€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `--incremental` | å¯ç”¨å¢é‡æ¨¡å¼ | |
| `--incremental-mode` | æ¨¡å¼ï¼šUNCOMMITTED/STAGED_ONLY/COMPARE_REFS | `COMPARE_REFS` |
| `--base-ref` | æ¯”è¾ƒçš„åŸºå‡† Git ref | `main`ã€`HEAD~1`ã€`abc123` |
| `--target-ref` | æ¯”è¾ƒçš„ç›®æ ‡ Git ref | `HEAD`ã€`feature-branch` |

### çŸ¥è¯†åº“é€‰é¡¹

| é€‰é¡¹ | ç®€å†™ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `-kb` | | çŸ¥è¯†åº“è·¯å¾„ | `src/test/java` |
| `--kb-types` | | ç´¢å¼•çš„æ–‡ä»¶ç±»å‹ | `java,md,yml` |

### äº¤äº’é€‰é¡¹

| é€‰é¡¹ | ç®€å†™ | è¯´æ˜ |
|------|------|------|
| `--interactive` | `-i` | å¯ç”¨äº¤äº’ç¡®è®¤æ¨¡å¼ |

## é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶ä½ç½®

Agent æŒ‰ä»¥ä¸‹é¡ºåºæœç´¢ `agent.yml`ï¼š

1. `--config` å‘½ä»¤è¡Œå‚æ•°
2. **JAR æ‰€åœ¨ç›®å½•**ï¼ˆæ¨èï¼‰
3. å½“å‰å·¥ä½œç›®å½•
4. ç”¨æˆ·ä¸»ç›®å½•ï¼ˆ`~/.unit-test-agent/`ï¼‰

### å®Œæ•´é…ç½®å‚è€ƒ (`agent.yml`)

```yaml
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# LLM è®¾ç½®
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
llm:
  # åè®®ï¼šopenai | openai-zhipu | anthropic | gemini
  protocol: "openai"
  
  # API å¯†é’¥ - æ”¯æŒç¯å¢ƒå˜é‡è¯­æ³•
  apiKey: "${env:UT_AGENT_API_KEY}"
  
  # åŸºç¡€ URL - è‡ªåŠ¨å¤„ç† /v1 æˆ– /v1beta åç¼€
  # ç¤ºä¾‹ï¼š
  #   - OpenAIï¼šhttps://api.openai.comï¼ˆé»˜è®¤ï¼‰
  #   - Azureï¼šhttps://your-resource.openai.azure.com
  #   - é˜¿é‡Œäº‘ï¼šhttps://dashscope.aliyuncs.com/compatible-mode/v1
  baseUrl: "${env:UT_AGENT_BASE_URL}"
  
  # æ¨¡å‹åç§°
  modelName: "${env:UT_AGENT_MODEL_NAME}"
  
  # æ¸©åº¦ï¼š0.0ï¼ˆç²¾ç¡®ï¼‰åˆ° 1.0ï¼ˆåˆ›é€ æ€§ï¼‰
  # æ¨èï¼šä»£ç ç”Ÿæˆä½¿ç”¨ 0.0
  temperature: 0.0
  
  # è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰
  timeout: 120
  
  # è‡ªå®šä¹‰ HTTP å¤´ï¼ˆç”¨äºä»£ç†æˆ–è®¤è¯ï¼‰
  customHeaders:
    # X-Custom-Header: "value"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# å·¥ä½œæµè®¾ç½®
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
workflow:
  # å¤±è´¥åæœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆæŒ‡æ•°é€€é¿ï¼‰
  maxRetries: 3
  
  # è¦†ç›–ç‡é˜ˆå€¼ï¼ˆ%ï¼‰- æœªè¾¾æ ‡æ—¶è‡ªåŠ¨è¡¥å……æµ‹è¯•
  coverageThreshold: 80
  
  # äº¤äº’æ¨¡å¼ - åœ¨æ¯æ¬¡æ–‡ä»¶å†™å…¥æ“ä½œå‰é¢„è§ˆå¹¶ç¡®è®¤
  # å¯ç”¨åï¼Œæ™ºèƒ½ä½“åœ¨å†™å…¥/ä¿®æ”¹æ–‡ä»¶å‰ä¼šæš‚åœå¹¶æ˜¾ç¤ºï¼š
  #   - æ–‡ä»¶é¢„è§ˆï¼ˆå‰ 30 è¡Œï¼‰
  #   - æ“ä½œç±»å‹ï¼ˆåˆ›å»º/è¦†ç›–/è¿½åŠ ï¼‰
  #   - æ–‡ä»¶è·¯å¾„
  # ä½¿ç”¨åœºæ™¯ï¼šç”Ÿäº§ä»£ç åº“ã€å…³é”®ç³»ç»Ÿã€å­¦ä¹ æ™ºèƒ½ä½“è¡Œä¸º
  # é»˜è®¤å€¼ï¼šfalseï¼ˆéäº¤äº’å¼ï¼Œé€‚ç”¨äº CI/CD å’Œæ‰¹é‡å¤„ç†ï¼‰
  interactive: false
  
  # å¯ç”¨ LSP è¯­æ³•æ£€æŸ¥ï¼ˆè‡ªåŠ¨ä¸‹è½½ JDT LS 1.50.0ï¼Œæ”¯æŒ JDK 21+ï¼‰
  # æä¾›å®Œæ•´è¯­ä¹‰åˆ†æï¼šç±»å‹é”™è¯¯ã€ç¼ºå¤±å¯¼å…¥
  use-lsp: false
  
  # å¯ç”¨è¿­ä»£æ–¹æ³•æµ‹è¯•æ¨¡å¼
  iterative-mode: false
  
  # æ¯æ–¹æ³•è¦†ç›–ç‡é˜ˆå€¼ï¼ˆè¿­ä»£æ¨¡å¼ï¼‰
  method-coverage-threshold: 80
  
  # è¦†ç›–ç‡è¾¾æ ‡æ—¶è·³è¿‡ä½ä¼˜å…ˆçº§æ–¹æ³•ï¼ˆgetters/settersï¼‰
  skip-low-priority: false

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# æ‰¹é‡æ¨¡å¼è®¾ç½®
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
batch:
  # æ’é™¤è§„åˆ™ï¼ˆglob æ¨¡å¼ï¼Œé€—å·åˆ†éš”ï¼‰
  excludePatterns: "**/dto/**,**/vo/**,**/entity/**"
  
  # Dry-run æ¨¡å¼ - ä»…åˆ†æï¼Œä¸ç”Ÿæˆ
  dryRun: false

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# å¢é‡æ¨¡å¼è®¾ç½®
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
incremental:
  # æ¨¡å¼ï¼šUNCOMMITTED | STAGED_ONLY | COMPARE_REFS
  mode: UNCOMMITTED
  
  # COMPARE_REFS æ¨¡å¼çš„ Git ref
  # baseRef: "main"
  # targetRef: "HEAD"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# æ¨èä¾èµ–ï¼ˆç¯å¢ƒè‡ªæ£€ä½¿ç”¨ï¼‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
dependencies:
  junit-jupiter: "5.10.1"
  mockito-core: "5.8.0"
  mockito-junit-jupiter: "5.8.0"
  mockito-inline: "5.8.0"
  jacoco-maven-plugin: "0.8.11"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Prompts é…ç½®
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
prompts:
  # ç³»ç»Ÿæç¤ºè¯æ¨¡æ¿è·¯å¾„ï¼ˆæ–‡ä»¶æˆ– classpath èµ„æºï¼‰
  system: "prompts/system-prompt.st"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Skills é…ç½®ï¼ˆåŠ¨æ€å·¥å…·é€‰æ‹©ï¼‰
# é€šè¿‡ä»…åŠ è½½ç›¸å…³å·¥å…·å‡å°‘çº¦ 60-70% çš„ Token æ¶ˆè€—
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
skills:
  - name: "analysis"
    description: "ä»£ç åˆ†æé˜¶æ®µ"
    tools: [CodeAnalyzerTool, FileSystemTool, BoundaryAnalyzerTool, StyleAnalyzerTool, ProjectScannerTool, TestDiscoveryTool]
  - name: "generation"
    description: "æµ‹è¯•ç”Ÿæˆé˜¶æ®µ"
    tools: [FileSystemTool, DirectoryTool, KnowledgeBaseTool, SyntaxCheckerTool, CodeAnalyzerTool]
  - name: "verification"
    description: "æµ‹è¯•éªŒè¯é˜¶æ®µ"
    tools: [MavenExecutorTool, TestReportTool, CoverageTool, FileSystemTool, MutationTestTool]
  - name: "repair"
    description: "ä¿®å¤é˜¶æ®µ"
    tools: [FileSystemTool, TestReportTool, CodeAnalyzerTool, SyntaxCheckerTool, MavenExecutorTool]
  - name: "full"
    description: "å®Œæ•´å·¥å…·é›†ï¼ˆé»˜è®¤ï¼‰"
    tools: []  # ç©ºæ•°ç»„è¡¨ç¤ºä½¿ç”¨å…¨éƒ¨å·¥å…·

# åœ¨ workflow ä¸­è®¾ç½®é»˜è®¤ skill:
# workflow:
#   default-skill: "analysis"
```

### ç¯å¢ƒå˜é‡

| å˜é‡ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `UT_AGENT_API_KEY` | LLM API å¯†é’¥ | `sk-xxx` |
| `UT_AGENT_BASE_URL` | LLM API åŸºç¡€ URL | `https://api.openai.com` |
| `UT_AGENT_MODEL_NAME` | æ¨¡å‹åç§° | `gpt-4o` |

### åè®®é…ç½®ç¤ºä¾‹

#### OpenAI / OpenAI å…¼å®¹

```yaml
llm:
  protocol: "openai"
  apiKey: "sk-..."
  modelName: "gpt-4o"
  # ä»£ç†é…ç½®ï¼š
  # baseUrl: "https://your-proxy.com/v1"
```

#### Anthropic (Claude)

```yaml
llm:
  protocol: "anthropic"
  apiKey: "sk-ant-..."
  modelName: "claude-3-5-sonnet-20240620"
```

#### Google Gemini

```yaml
llm:
  protocol: "gemini"
  apiKey: "AI..."
  modelName: "gemini-1.5-pro"
```

#### æ™ºè°± AI (GLM)

```yaml
llm:
  protocol: "openai-zhipu"
  apiKey: "your-zhipu-api-key"
  modelName: "glm-4.7"
  baseUrl: "https://open.bigmodel.cn/api/coding/paas/v4"
```

#### é˜¿é‡Œäº‘ï¼ˆç™¾ç‚¼ / DashScopeï¼‰

```yaml
llm:
  protocol: "openai"
  apiKey: "sk-..."
  baseUrl: "https://dashscope.aliyuncs.com/compatible-mode/v1"
  modelName: "qwen-max"
```

## å¯ç”¨å·¥å…·

Agent å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·ï¼š

### æ–‡ä»¶ç³»ç»Ÿå·¥å…·

| å·¥å…· | è¯´æ˜ |
|------|------|
| `readFile` | è¯»å–æ–‡ä»¶å†…å®¹ |
| `writeFile` | å†™å…¥æ–‡ä»¶å†…å®¹ |
| `fileExists` | æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ |
| `searchReplace` | æ–‡ä»¶ä¸­æœç´¢æ›¿æ¢ |
| `listFiles` | åˆ—å‡ºç›®å½•å†…å®¹ |
| `createDirectory` | åˆ›å»ºç›®å½• |

### ä»£ç åˆ†æå·¥å…·

| å·¥å…· | è¯´æ˜ |
|------|------|
| `analyzeClass` | åˆ†æ Java ç±»ç»“æ„ï¼ˆæ–¹æ³•ã€å­—æ®µã€ä¾èµ–ï¼‰ |
| `analyzeMethod` | è·å–æ–¹æ³•è¯¦ç»†åˆ†æï¼ˆå¤æ‚åº¦ã€åˆ†æ”¯ï¼‰ |
| `getMethodsForTesting` | åˆ—å‡ºé€‚åˆæµ‹è¯•çš„å…¬å…±æ–¹æ³• |
| `scanProjectClasses` | æ‰«æé¡¹ç›®æºç±» |

### è¯­æ³•æ£€æŸ¥å·¥å…·

| å·¥å…· | è¯´æ˜ |
|------|------|
| `checkSyntax` | å¿«é€Ÿ JavaParser è¯­æ³•éªŒè¯ï¼ˆ~10msï¼‰ |
| `checkSyntaxContent` | æ£€æŸ¥ä»£ç å­—ç¬¦ä¸²çš„è¯­æ³• |
| `validateTestStructure` | éªŒè¯ JUnit 5 æµ‹è¯•ç±»ç»“æ„ï¼ˆ@ExtendWithã€@Mockã€@Testï¼‰ |
| `initializeLsp` | åˆå§‹åŒ– JDT Language Server è¿›è¡Œè¯­ä¹‰æ£€æŸ¥ |
| `checkSyntaxWithLsp` | å®Œæ•´è¯­ä¹‰åˆ†æï¼ˆç±»å‹é”™è¯¯ã€ç¼ºå¤±å¯¼å…¥ï¼‰ |
| `shutdownLsp` | é‡Šæ”¾ LSP æœåŠ¡èµ„æº |

### Maven å·¥å…·

| å·¥å…· | è¯´æ˜ |
|------|------|
| `compileProject` | è¿è¡Œ `mvn compile`ï¼ˆè¯­æ³•æ£€æŸ¥æœªé€šè¿‡æ—¶ä¼šè¢«é˜»æ­¢ï¼‰ |
| `executeTest` | è¿è¡Œç‰¹å®šæµ‹è¯•ç±» |

### ç¼–è¯‘å®ˆå« (v2.1.0)

`CompileGuard` åœ¨å·¥å…·å±‚é¢å¼ºåˆ¶æ‰§è¡Œ"å…ˆè¯­æ³•æ£€æŸ¥å†ç¼–è¯‘"çš„å·¥ä½œæµï¼š

```
writeFile(*.java) â†’ markFileModified()
     â†“
checkSyntax() â†’ é€šè¿‡ â†’ markSyntaxPassed() â†’ compileProject() âœ…
     â†“
   å¤±è´¥ â†’ markSyntaxFailed() â†’ ä¿®å¤ä»£ç  â†’ é‡æ–°æ£€æŸ¥
     â†“
æœªé€šè¿‡ checkSyntax() ç›´æ¥è°ƒç”¨ compileProject() â†’ âŒ COMPILE_BLOCKED
```

**ä¼˜åŠ¿ï¼š**
- é˜²æ­¢å¯¹æ— æ•ˆä»£ç è¿›è¡Œæ— æ•ˆç¼–è¯‘å°è¯•
- æä¾›æ¸…æ™°çš„ä¿®å¤æŒ‡å¼•
- å‡å°‘è¿­ä»£æ¬¡æ•°å’Œ Token æ¶ˆè€—

### è¦†ç›–ç‡å·¥å…·

| å·¥å…· | è¯´æ˜ |
|------|------|
| `getCoverageReport` | è·å–æ•´ä½“è¦†ç›–ç‡æ‘˜è¦ |
| `checkCoverageThreshold` | æ£€æŸ¥ç±»æ˜¯å¦è¾¾åˆ°è¦†ç›–ç‡é˜ˆå€¼ |
| `getMethodCoverageDetails` | è·å–æ–¹æ³•çº§è¦†ç›–ç‡è¯¦æƒ… |
| `getSingleMethodCoverage` | è·å–å•ä¸ªæ–¹æ³•çš„è¦†ç›–ç‡ï¼ˆè¿­ä»£æ¨¡å¼ï¼‰ |
| `getUncoveredMethods` | è·å–ä½äºé˜ˆå€¼çš„æœªè¦†ç›–æ–¹æ³•åˆ—è¡¨ |

### è¦†ç›–ç‡åé¦ˆå¼•æ“

`CoverageFeedbackEngine` æä¾›æ™ºèƒ½åˆ†æå’Œæ”¹è¿›å»ºè®®ï¼š

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| **åé¦ˆå‘¨æœŸ** | åˆ†æè¦†ç›–ç‡ï¼Œè¯†åˆ«æœªè¦†ç›–åŒºåŸŸï¼Œç”Ÿæˆä¼˜å…ˆçº§æ’åºçš„å»ºè®® |
| **è¾¹ç•Œåˆ†æ** | é›†æˆ `BoundaryAnalyzerTool` è¯†åˆ«è¾¹ç•Œæµ‹è¯•æœºä¼š |
| **å˜å¼‚åˆ†æ** | å¯é€‰é›†æˆ `MutationTestTool` è¯„ä¼°æµ‹è¯•æœ‰æ•ˆæ€§ |
| **æ”¹è¿›å»ºè®®** | ä¼˜å…ˆçº§æ’åºï¼šç¼ºå¤±æµ‹è¯•ã€è¾¹ç•Œæµ‹è¯•ã€å˜å¼‚å­˜æ´» |
| **è¿­ä»£å†å²** | è·Ÿè¸ªå¤šè½®è¿­ä»£çš„è¦†ç›–ç‡è¿›å±• |
| **æ™ºèƒ½åœæ­¢** | æ£€æµ‹åˆ°æ— è¿›å±•æ—¶è‡ªåŠ¨åœæ­¢è¿­ä»£ |

### è¿­ä»£æµ‹è¯•å·¥å…·

| å·¥å…· | è¯´æ˜ |
|------|------|
| `initMethodIteration` | ä¸ºç±»åˆå§‹åŒ–æ–¹æ³•è¿­ä»£ |
| `getNextMethod` | è·å–ä¸‹ä¸€ä¸ªå¾…æµ‹è¯•æ–¹æ³• |
| `completeCurrentMethod` | æ ‡è®°å½“å‰æ–¹æ³•ä¸ºå·²å®Œæˆ |
| `getIterationProgress` | è·å–è¿­ä»£è¿›åº¦æ‘˜è¦ |
| `skipLowPriorityMethods` | è·³è¿‡å‰©ä½™ä½ä¼˜å…ˆçº§æ–¹æ³• |

### Git å·¥å…·

| å·¥å…· | è¯´æ˜ |
|------|------|
| `getUncommittedChanges` | åˆ—å‡ºæœªæäº¤çš„æ–‡ä»¶å˜æ›´ |
| `getStagedChanges` | åˆ—å‡ºæš‚å­˜çš„æ–‡ä»¶å˜æ›´ |
| `getChangesBetweenRefs` | åˆ—å‡ºä¸¤ä¸ª Git ref ä¹‹é—´çš„å˜æ›´ |
| `listBranches` | åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ |
| `getFileDiff` | è·å–æ–‡ä»¶çš„è¯¦ç»†å·®å¼‚ |

### çŸ¥è¯†åº“å·¥å…·

| å·¥å…· | è¯´æ˜ |
|------|------|
| `searchKnowledge` | åœ¨çŸ¥è¯†åº“ä¸­æœç´¢æ¨¡å¼ |
| `searchTestingGuidelines` | æŸ¥æ‰¾æµ‹è¯•è§„èŒƒ |
| `searchTestExamples` | æŸ¥æ‰¾ç°æœ‰æµ‹è¯•ç¤ºä¾‹ |

## ç³»ç»Ÿæ¶æ„

```mermaid
flowchart TB
    subgraph Input["ğŸ–¥ï¸ è¾“å…¥å±‚"]
        CLI[CLI / ç”¨æˆ·è¾“å…¥]
    end

    subgraph Config["âš™ï¸ é…ç½®å±‚"]
        CL[é…ç½®åŠ è½½å™¨]
        CV[é…ç½®éªŒè¯å™¨]
        CL --> CV
    end

    subgraph Audit["ğŸ” ç¯å¢ƒå®¡è®¡"]
        EA[ç¯å¢ƒæ£€æŸ¥å™¨]
        JDK[JDK æ£€æŸ¥]
        MVN[Maven æ£€æŸ¥]
        LSP[LSP æ£€æŸ¥]
        LLM[LLM æ£€æŸ¥]
        EA --> JDK & MVN & LSP & LLM
    end

    subgraph Framework["ğŸš€ è‡ªç ” Agent æ¡†æ¶"]
        subgraph Adapters["LLM é€‚é…å™¨"]
            OAI[OpenAI é€‚é…å™¨]
            CLA[Claude é€‚é…å™¨]
            GEM[Gemini é€‚é…å™¨]
        end
        subgraph Core["æ ¸å¿ƒç»„ä»¶"]
            CTX[ä¸Šä¸‹æ–‡ç®¡ç†å™¨<br/>æ¶ˆæ¯å†å²]
            REG[å·¥å…·æ³¨å†Œè¡¨<br/>åå°„æ‰§è¡Œ]
            EXE[Agent æ‰§è¡Œå™¨<br/>ReAct å¾ªç¯]
        end
        Adapters --> EXE
        CTX --> EXE
        REG --> EXE
    end

    subgraph Orchestrator["ğŸ¯ Agent ç¼–æ’å™¨"]
        SAO[SimpleAgentOrchestrator]
        CFE[CoverageFeedbackEngine<br/>è¦†ç›–ç‡åé¦ˆ]
        RE[RetryExecutor<br/>æŒ‡æ•°é€€é¿é‡è¯•]
        SH[StreamingHandler<br/>å®æ—¶è¾“å‡º]
        DPB[DynamicPromptBuilder<br/>åŠ¨æ€æç¤ºè¯]
        SAO --> CFE & RE & SH & DPB
    end

    subgraph Tools["ğŸ› ï¸ å·¥å…·å±‚"]
        subgraph FileTools["æ–‡ä»¶æ“ä½œ"]
            FS[FileSystemTool]
            DIR[DirectoryTool]
        end
        subgraph CodeTools["ä»£ç åˆ†æ"]
            CA[CodeAnalyzerTool]
            SC[SyntaxCheckerTool<br/>JavaParser]
            LSPC[LspSyntaxCheckerTool<br/>JDT LS]
        end
        subgraph BuildTools["æ„å»ºæµ‹è¯•"]
            CG[CompileGuard<br/>ğŸ›¡ï¸ ç¼–è¯‘å®ˆå«]
            ME[MavenExecutorTool]
            COV[CoverageTool]
            MUT[MutationTestTool]
        end
        subgraph VCSTools["ç‰ˆæœ¬æ§åˆ¶"]
            GIT[GitDiffTool]
            PS[ProjectScannerTool]
        end
        subgraph IterTools["è¿­ä»£æµ‹è¯•"]
            MIT[MethodIteratorTool]
        end
    end

    CLI --> CL
    CV --> EA
    EA --> SAO
    SAO --> EXE
    EXE --> Tools
    
    FS -.->|æ ‡è®°å·²ä¿®æ”¹| CG
    SC -.->|æ ‡è®°é€šè¿‡/å¤±è´¥| CG
    LSPC -.->|æ ‡è®°é€šè¿‡/å¤±è´¥| CG
    CG -.->|å¯ä»¥ç¼–è¯‘?| ME

    style Input fill:#e1f5fe
    style Config fill:#fff3e0
    style Audit fill:#f3e5f5
    style Framework fill:#e8f5e9
    style Orchestrator fill:#fce4ec
    style Tools fill:#f5f5f5
```

### ç»„ä»¶è¯´æ˜

| å±‚çº§ | ç»„ä»¶ | è¯´æ˜ |
|------|------|------|
| **è¾“å…¥å±‚** | CLI | åŸºäº picocli çš„å‘½ä»¤è¡Œç•Œé¢ |
| **é…ç½®å±‚** | ConfigLoader | æ”¯æŒç¯å¢ƒå˜é‡çš„ YAML é…ç½® |
| **ç¯å¢ƒå®¡è®¡** | EnvironmentChecker | éªŒè¯ JDKã€Mavenã€LSPã€LLM å¯ç”¨æ€§ |
| **Agent æ¡†æ¶** | è‡ªç ”è½»é‡çº§æ¡†æ¶ | å¤š LLM æ”¯æŒçš„ ReAct å¾ªç¯ |
| **ç¼–æ’å™¨** | SimpleAgentOrchestrator | æ ¸å¿ƒå¾ªç¯ï¼Œæ”¯æŒé‡è¯•å’Œæµå¼è¾“å‡º |
| **åé¦ˆå¼•æ“** | CoverageFeedbackEngine | æ™ºèƒ½è¦†ç›–ç‡åˆ†æå’Œæ”¹è¿›å»ºè®® |
| **ç¼–è¯‘å®ˆå«** | CompileGuard | å·¥å…·å±‚é¢å¼ºåˆ¶è¯­æ³•æ£€æŸ¥é€šè¿‡æ‰èƒ½ç¼–è¯‘ |
| **å·¥å…·å±‚** | 15+ å·¥å…· | æ–‡ä»¶ã€ä»£ç ã€æ„å»ºã€Gitã€è¦†ç›–ç‡æ“ä½œ |

### è‡ªç ”æ¡†æ¶ vs LangChain4j

| å¯¹æ¯”é¡¹ | è‡ªç ”æ¡†æ¶ (v2.0.0) | LangChain4j (v1.0.0) |
|--------|-------------------|----------------------|
| **JAR å¤§å°** | ~15MB | ~30MB |
| **ä¾èµ–æ•°** | 8 æ ¸å¿ƒ | 20+ |
| **æ™ºè°± AI** | å®Œå…¨æ”¯æŒï¼Œå·²ä¿®å¤ 1214 | éƒ¨åˆ†æ”¯æŒï¼Œæ¶ˆæ¯æ ¼å¼é—®é¢˜ |
| **ä¸Šä¸‹æ–‡æ§åˆ¶** | ç²¾ç»†æ§åˆ¶ | æœ‰é™ |
| **å¯åŠ¨æ—¶é—´** | æ›´å¿« | è¾ƒæ…¢ |

### CoverageFeedbackEngine é›†æˆæ¶æ„

`CoverageFeedbackEngine` æä¾›æ™ºèƒ½è¦†ç›–ç‡åˆ†æï¼Œé›†æˆåˆ°æµ‹è¯•ç”Ÿæˆå·¥ä½œæµä¸­ï¼š

```mermaid
flowchart TB
    subgraph PreCheck["ğŸ” é¢„æ£€æŸ¥é˜¶æ®µ"]
        PC1[æ­¥éª¤ 1: æ£€æŸ¥æµ‹è¯•æ–‡ä»¶]
        PC2[æ­¥éª¤ 2: æ¸…ç†å¹¶æµ‹è¯•]
        PC3[æ­¥éª¤ 3: è¦†ç›–ç‡åˆ†æ]
        PC4[æ­¥éª¤ 4: åé¦ˆåˆ†æ]
        PC1 --> PC2 --> PC3 --> PC4
    end

    subgraph FeedbackEngine["ğŸ”¬ CoverageFeedbackEngine"]
        CFE[runFeedbackCycle]
        
        subgraph Analysis["åˆ†æç»„ä»¶"]
            COV[CoverageTool<br/>è¦†ç›–ç‡æ•°æ®]
            BND[BoundaryAnalyzerTool<br/>è¾¹ç•Œæ£€æµ‹]
            MUT[MutationTestTool<br/>æµ‹è¯•æœ‰æ•ˆæ€§]
        end
        
        subgraph Output["åé¦ˆè¾“å‡º"]
            SUG[æ”¹è¿›å»ºè®®<br/>ä¼˜å…ˆçº§æ’åº]
            ACT[æ¨èè¡ŒåŠ¨]
            HIS[è¿­ä»£å†å²<br/>è¿›åº¦è·Ÿè¸ª]
        end
        
        CFE --> COV & BND & MUT
        COV & BND & MUT --> SUG
        SUG --> ACT
        CFE --> HIS
    end

    subgraph MethodIteration["ğŸ”„ æ–¹æ³•è¿­ä»£é˜¶æ®µ"]
        MI1[è·å–ä¸‹ä¸€ä¸ªæ–¹æ³•]
        MI2[æ„å»ºç›®æ ‡æç¤ºè¯<br/>+ åé¦ˆå»ºè®®]
        MI3[LLM ç”Ÿæˆæµ‹è¯•]
        MI4[ç¼–è¯‘å¹¶è¿è¡Œæµ‹è¯•]
        MI5[éªŒè¯è¦†ç›–ç‡]
        MI6[å®Œæˆæ–¹æ³•]
        
        MI1 --> MI2 --> MI3 --> MI4 --> MI5 --> MI6
        MI6 -->|ä¸‹ä¸€ä¸ªæ–¹æ³•| MI1
    end

    subgraph Report["ğŸ“Š æŠ¥å‘Šç”Ÿæˆ"]
        RPT1[è¿­ä»£ç»Ÿè®¡]
        RPT2[è¦†ç›–ç‡è¶‹åŠ¿]
        RPT3[Token ä½¿ç”¨]
        RPT4[åé¦ˆå†å²]
        RPT1 & RPT2 & RPT3 & RPT4 --> MD[Markdown æŠ¥å‘Š]
    end

    PC4 --> FeedbackEngine
    FeedbackEngine -->|å»ºè®®| MI2
    FeedbackEngine -->|å†å²| RPT4
    MI6 -->|ç»Ÿè®¡| RPT1

    style PreCheck fill:#e3f2fd
    style FeedbackEngine fill:#e8f5e9
    style MethodIteration fill:#fff3e0
    style Report fill:#fce4ec
```

**å·¥ä½œæµé›†æˆç‚¹ï¼š**

| é˜¶æ®µ | é›†æˆæ–¹å¼ | è¯´æ˜ |
|------|---------|------|
| **é¢„æ£€æŸ¥** | åˆå§‹åˆ†æ | è¿è¡Œ `runFeedbackCycle()` è·å–åŸºå‡†è¦†ç›–ç‡å’Œå»ºè®® |
| **æ–¹æ³•æç¤ºè¯** | å®šå‘å»ºè®® | å°†æ–¹æ³•ç‰¹å®šå’Œè¾¹ç•Œæµ‹è¯•å»ºè®®æ³¨å…¥ LLM æç¤ºè¯ |
| **è¿­ä»£æ§åˆ¶** | æ™ºèƒ½åœæ­¢ | ä½¿ç”¨ `shouldContinueIterating()` æ£€æµ‹åœæ» |
| **æŠ¥å‘Š** | å†å²æ‘˜è¦ | åœ¨æœ€ç»ˆ Markdown æŠ¥å‘Šä¸­åŒ…å« `getIterationSummary()` |

**å»ºè®®ç±»å‹ï¼š**

| ç±»å‹ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|------|--------|------|
| `MISSING_TEST` | é«˜ | æœªè¦†ç›–æ–¹æ³•éœ€è¦æµ‹è¯• |
| `BOUNDARY_TEST` | ä¸­ | è¯†åˆ«åˆ°è¾¹ç•Œæ¡ä»¶ |
| `MUTATION_SURVIVOR` | é«˜ | å˜å¼‚å­˜æ´» - åŠ å¼ºæ–­è¨€ |
| `WEAK_ASSERTION` | ä½ | æ–­è¨€å¯ä»¥æ›´å¼º |

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. API Key æœªæ‰¾åˆ°

**é”™è¯¯ï¼š** `LLM API Key is missing`

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®
export UT_AGENT_API_KEY="your-key"

# æˆ–é€šè¿‡ config å‘½ä»¤è®¾ç½®
java -jar utagent.jar config --api-key "your-key"
```

#### 2. Maven æœªæ‰¾åˆ°

**é”™è¯¯ï¼š** `Maven not found in PATH`

**è§£å†³æ–¹æ¡ˆï¼š**
- å®‰è£… Maven 3.8+
- å°† Maven æ·»åŠ åˆ° PATH
- éªŒè¯ï¼š`mvn --version`

#### 3. JaCoCo æŠ¥å‘Šæœªæ‰¾åˆ°

**é”™è¯¯ï¼š** `JaCoCo coverage report not found`

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ç¡®ä¿ pom.xml ä¸­é…ç½®äº† JaCoCo
# è¿è¡Œæµ‹è¯•ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
mvn clean test jacoco:report
```

#### 4. é€Ÿç‡é™åˆ¶è¶…å‡º (1302 é”™è¯¯)

**é”™è¯¯ï¼š** `æ‚¨å½“å‰ä½¿ç”¨è¯¥APIçš„å¹¶å‘æ•°è¿‡é«˜`

**è§£å†³æ–¹æ¡ˆï¼š**
- Agent ä¼šè‡ªåŠ¨ä½¿ç”¨æŒ‡æ•°é€€é¿é‡è¯•
- å¦‚éœ€è¦å¯å¢åŠ  `--timeout` å’Œ `--max-retries`
- è€ƒè™‘ä½¿ç”¨æ›´é«˜çº§åˆ«çš„ API å¥—é¤
- åœ¨è¯·æ±‚ä¹‹é—´å¢åŠ å»¶è¿Ÿ

#### 5. æ™ºè°± AI 1214 é”™è¯¯ï¼ˆv2.0.0 å·²ä¿®å¤ï¼‰

**é”™è¯¯ï¼š** `messages å‚æ•°éæ³•`

**è§£å†³æ–¹æ¡ˆï¼š**
- å‡çº§åˆ° v2.0.0
- è‡ªç ”æ¡†æ¶ï¼ˆv2.0.0 é»˜è®¤ï¼‰æ­£ç¡®å¤„ç†æ™ºè°± AI æ¶ˆæ¯æ ¼å¼

#### 7. æµ‹è¯•ç¼–è¯‘å¤±è´¥

**é”™è¯¯ï¼š** `Compilation failed`

**è§£å†³æ–¹æ¡ˆï¼š**
- Agent ä¼šå°è¯•è‡ªåŠ¨ä¿®å¤
- æ£€æŸ¥ pom.xml ä¸­æ˜¯å¦æœ‰æ‰€æœ‰ä¾èµ–
- éªŒè¯ Mockito ç‰ˆæœ¬å…¼å®¹æ€§

### å¯ç”¨è¯¦ç»†æ—¥å¿—

```bash
# é€šè¿‡å‘½ä»¤è¡Œ
java -jar utagent.jar --target Foo.java -v

# é€šè¿‡ç³»ç»Ÿå±æ€§
java -Dut.agent.log.level=DEBUG -jar unit-test-agent-4j.jar --target Foo.java
```

### æ—¥å¿—çº§åˆ«

| çº§åˆ« | å†…å®¹ |
|------|------|
| `INFO` | ç”¨æˆ·è¿›åº¦ã€å…³é”®é‡Œç¨‹ç¢‘ |
| `DEBUG` | å·¥å…·è¾“å…¥/è¾“å‡ºã€æŠ€æœ¯ç»†èŠ‚ |
| `WARN` | éè‡´å‘½é—®é¢˜ |
| `ERROR` | éœ€è¦å…³æ³¨çš„å¤±è´¥ |

## å‚ä¸è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·å‚é˜… [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£æŒ‡å—ã€‚

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-org/unit-test-agent-4j.git
cd unit-test-agent-4j

# æ„å»ºå¹¶æµ‹è¯•
mvn clean verify

# è¿è¡Œç‰¹å®šæµ‹è¯•
mvn test -Dtest=FileSystemToolTest
```

### é¡¹ç›®ç»“æ„

```
unit-test-agent-4j/
â”œâ”€â”€ src/main/java/com/codelogickeep/agent/ut/
â”‚   â”œâ”€â”€ config/           # é…ç½®åŠ è½½ä¸éªŒè¯
â”‚   â”œâ”€â”€ engine/           # æ ¸å¿ƒå¼•æ“
â”‚   â”‚   â”œâ”€â”€ CoverageFeedbackEngine.java  # æ™ºèƒ½è¦†ç›–ç‡åˆ†æ
â”‚   â”‚   â”œâ”€â”€ RetryExecutor.java           # æŒ‡æ•°é€€é¿é‡è¯•
â”‚   â”‚   â”œâ”€â”€ EnvironmentChecker.java      # ç¯å¢ƒéªŒè¯
â”‚   â”‚   â”œâ”€â”€ BatchAnalyzer.java           # æ‰¹é‡æ¨¡å¼åˆ†æ
â”‚   â”‚   â””â”€â”€ DynamicPromptBuilder.java    # ä¸Šä¸‹æ–‡æ„ŸçŸ¥æç¤ºè¯
â”‚   â”œâ”€â”€ framework/        # è‡ªç ”è½»é‡çº§æ¡†æ¶ (v2.0.0)
â”‚   â”‚   â”œâ”€â”€ adapter/      # LLM é€‚é…å™¨ (OpenAI, Claude, Gemini, æ™ºè°±)
â”‚   â”‚   â”œâ”€â”€ context/      # ä¸Šä¸‹æ–‡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ executor/     # ReAct å¾ªç¯æ‰§è¡Œå™¨
â”‚   â”‚   â”œâ”€â”€ model/        # æ¶ˆæ¯æ¨¡å‹ã€è¿­ä»£ç»Ÿè®¡
â”‚   â”‚   â””â”€â”€ tool/         # å·¥å…·æ³¨å†Œä¸æ‰§è¡Œ
â”‚   â”œâ”€â”€ exception/        # è‡ªå®šä¹‰å¼‚å¸¸
â”‚   â””â”€â”€ tools/            # Agent å·¥å…· (15+)
â”‚       â”œâ”€â”€ FileSystemTool.java
â”‚       â”œâ”€â”€ CodeAnalyzerTool.java
â”‚       â”œâ”€â”€ CoverageTool.java
â”‚       â”œâ”€â”€ BoundaryAnalyzerTool.java
â”‚       â”œâ”€â”€ MutationTestTool.java
â”‚       â”œâ”€â”€ MethodIteratorTool.java
â”‚       â””â”€â”€ ...
â”œâ”€â”€ src/test/java/        # å•å…ƒæµ‹è¯•
â”œâ”€â”€ doc/                  # æ–‡æ¡£
â”œâ”€â”€ prompts/              # æç¤ºè¯æ¨¡æ¿
â”œâ”€â”€ result/               # ç”Ÿæˆçš„æŠ¥å‘Šï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â””â”€â”€ pom.xml
```

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ Apache License 2.0 è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

**çŒ®ç»™é‚£äº›åŒå€¦æ‰‹å†™æµ‹è¯•çš„ Java å¼€å‘è€… â¤ï¸**
