# =============================================================================
# Unit Test Agent 4j - Configuration File
# =============================================================================

# LLM Settings
llm:
  protocol: "openai"                      # openai | openai-zhipu | anthropic | gemini
  api-key: "${env:UT_AGENT_API_KEY}"       # API Key (supports env var)
  base-url: "${env:UT_AGENT_BASE_URL}"     # Base URL (auto handles /v1 suffix)
  model-name: "${env:UT_AGENT_MODEL_NAME}" # Model name
  temperature: 0.0                        # 0.0 (precise) ~ 1.0 (creative)
  timeout: 120                            # Request timeout in seconds
  custom-headers: {}                       # Custom HTTP headers (optional)
    # X-Custom-Header: "value"

# Workflow Settings
workflow:
  max-retries: 5                           # Max retry attempts on failure
  coverage-threshold: 80                   # Coverage threshold (%)
  interactive: false                      # Interactive confirmation mode
  use-lsp: false                          # Use LSP for syntax check (auto-downloads JDT LS)
  iterative-mode: false                   # Enable iterative method testing mode
  method-coverage-threshold: 80           # Per-method coverage threshold (%)
  skip-low-priority: false                # Skip low-priority methods (P2) in iterative mode
  max-stale-iterations: 3                 # Stop after N iterations without progress
  min-coverage-gain: 1                    # Minimum coverage gain (%) per iteration to continue
  enable-phase-switching: false           # Enable dynamic phase switching (default: false for backward compatibility)

# Batch Mode Settings (for --project)
batch:
  exclude-patterns: ""                     # Glob patterns to exclude (comma-separated)
    # Example: "**/dto/**,**/vo/**,**/domain/**"
  dry-run: false                           # Analyze only, no generation

# Incremental Mode Settings (for --incremental)
incremental:
  mode: "uncommitted"                     # uncommitted | staged | compare
  # base-ref: "main"                       # Base ref for compare mode (required for compare)
  target-ref: "HEAD"                       # Target ref for compare mode
  # exclude-patterns: ".*Test\\.java"      # Regex patterns to exclude files

# Recommended Dependencies & Minimum Versions (for env check)
dependencies:
  junit-jupiter: "5.10.1"
  mockito-core: "5.8.0"
  mockito-junit-jupiter: "5.8.0"
  mockito-inline: "5.8.0"
  byte-buddy: "1.14.10"
  objenesis: "3.3"
  jacoco-maven-plugin: "0.8.11"

# Prompts Configuration
prompts:
  system: "prompts/system-prompt.st"      # System prompt template path
